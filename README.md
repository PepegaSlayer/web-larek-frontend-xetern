# 3 Курс

# Рябков Георгий Константинович

# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Архитектура

### Модели

#### CartModel

`CartModel` отвечает за управление корзиной покупок. Он реализует интерфейс `ICartModel` и использует `IEventEmitter` для уведомления об изменениях в корзине.

- **Свойства:**
  - `products`: `Map<string, number>` - хранит идентификаторы продуктов и их количество.
  - `totalPrice`: `number` - общая стоимость продуктов в корзине.

- **Методы:**
  - `add(id: string): void` - добавляет продукт в корзину. Если продукт уже есть, увеличивает его количество.
  - `remove(id: string): void` - удаляет продукт из корзины. Если количество продукта становится равным нулю, он удаляется из корзины.
  - `_changed(): void` - защищенный метод, который вызывает событие изменения корзины.

#### CatalogModel

`CatalogModel` управляет списком продуктов в каталоге. Он реализует интерфейс `ICatalogModel` и также использует `IEventEmitter`.

- **Свойства:**
  - `products`: `IProductModel[]` - массив продуктов в каталоге.

- **Методы:**
  - `setItems(products: IProductModel[]): void` - устанавливает список продуктов и вызывает событие обновления каталога.
  - `getProduct(id: string): IProductModel` - возвращает продукт по его идентификатору.

### Представления

#### CatalogView

`CatalogView` отвечает за отображение списка продуктов в каталоге.

- **Методы:**
  - `render({ products }: { products: HTMLElement[] }): HTMLElement` - заменяет содержимое контейнера на переданные элементы продуктов.

#### ProductView

`ProductView` отвечает за отображение отдельного продукта.

- **Методы:**
  - `render(product: IProductModel): HTMLElement` - создает элемент продукта на основе переданной модели продукта и добавляет обработчик события клика.

#### CartProductView

`CartProductView` отвечает за отображение продукта в корзине.

- **Методы:**
  - `render(data: { id: string, title: string }): HTMLElement` - обновляет содержимое элемента корзины на основе переданных данных о продукте.

#### CartView

`CartView` отвечает за отображение всей корзины.

- **Методы:**
  - `render(data: { products: HTMLElement[] }): HTMLElement` - заменяет содержимое контейнера на переданные элементы продуктов в корзине.

### Интерфейсы

#### IView

`IView` определяет интерфейс для всех представлений.

- **Методы:**
  - `render(data?: object): HTMLElement` - метод для рендеринга представления.

#### IViewConstructor

`IViewConstructor` определяет интерфейс для конструкторов представлений.

### Основной файл (index.ts)

В `index.ts` происходит инициализация приложения и связывание всех компонентов.

- **Импортируемые компоненты:**
  - `Api` - для работы с API.
  - `EventEmitter` - для управления событиями.
  - Модели: `CartModel`, `CatalogModel`.
  - Представления: `CatalogView`, `ProductView`, `CartProductView`, `CartView`.

- **Инициализация:**
  - Создаются экземпляры `Api` и `EventEmitter`.
  - Создаются экземпляры моделей и представлений.
  - Загружаются продукты с API и обновляется каталог.
  - Обрабатываются события добавления и удаления продуктов из корзины.

- **Функции:**
  - `renderCatalog(products: IProductModel[])` - рендерит каталог продуктов.
  - `renderCart(items: string[])` - рендерит корзину с продуктами.

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```